<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Moje Wynajmy | Premium</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');

        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0; padding: 0; 
            background-color: #121212; color: #e0e0e0; 
            line-height: 1.6; 
        }

        .container { width: 90%; max-width: 900px; margin: 50px auto; }
        h1 { font-size: 2.5rem; font-weight: 600; color: #fff; letter-spacing: -1px; margin-bottom: 10px; }
        .back-link { color: #666; text-decoration: none; font-size: 0.9rem; transition: 0.3s; }
        .back-link:hover { color: #448a44; }

        .msg { padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; font-size: 0.9rem; }
        .msg-error { background: #331a1a; color: #ff6b6b; border: 1px solid #5c2d2d; }
        .msg-success { background: #1b2e1b; color: #7cfc00; border: 1px solid #2d4d2d; }

        .wynajem-card { 
            background: #1e1e1e; padding: 25px; border-radius: 15px; border: 1px solid #2a2a2a; 
            margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; transition: 0.3s;
        }
        .wynajem-card:hover { border-color: #3a3a3a; transform: scale(1.01); }

        .car-details h3 { margin: 0 0 10px 0; color: #fff; font-size: 1.3rem; }
        .info-row { font-size: 0.9rem; color: #888; margin-bottom: 5px; }

        .price-tag { text-align: right; padding-left: 20px; border-left: 1px solid #2a2a2a; }
        .price-tag .amount { display: block; font-size: 1.5rem; font-weight: 600; color: #fff; }
        .price-tag .label { font-size: 0.75rem; color: #555; text-transform: uppercase; }

        /* NOWE STYLE DLA PRZYCISKÓW */
        .actions-group { display: flex; gap: 10px; margin-top: 15px; }

        .btn-cancel { 
            display: inline-block; background-color: transparent; color: #ff6b6b; 
            padding: 8px 16px; text-decoration: none; border: 1px solid #5c2d2d;
            border-radius: 6px; font-size: 0.85rem; font-weight: 600; transition: 0.3s;
        }
        .btn-cancel:hover { background-color: #331a1a; border-color: #ff6b6b; }

        .btn-edit { 
            display: inline-block; background-color: transparent; color: #448a44; 
            padding: 8px 16px; text-decoration: none; border: 1px solid #2d4d2d;
            border-radius: 6px; font-size: 0.85rem; font-weight: 600; transition: 0.3s;
        }
        .btn-edit:hover { background-color: #1b2e1b; border-color: #448a44; }

        .status-alert { color: #666; font-size: 0.85rem; font-style: italic; margin-top: 15px; display: flex; align-items: center; }
        .status-alert::before { content: ""; width: 8px; height: 8px; background: #444; border-radius: 50%; margin-right: 8px; }
    </style>
</head>
<body>

<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="msg {% if message.tags == 'error' %}msg-error{% else %}msg-success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <a href="{% url 'home' %}" class="back-link">← Powrót do strony głównej</a>
    <h1>Moje Wynajmy</h1>

    {% for w in wynajmy %}
        <div class="wynajem-card">
            <div class="car-details">
                <h3>{{ w.samochod.marka }} {{ w.samochod.model }}</h3>
                <div class="info-row"><strong>Termin:</strong> {{ w.data_od }} — {{ w.data_do }}</div>
                <div class="info-row"><strong>Właściciel:</strong> {{ w.samochod.wlasciciel.username }}</div>
                
                <div class="actions-group">
                    {% if w.data_od > dzisiaj %}
                        <a href="{% url 'edytuj_wynajem' w.id %}" class="btn-edit">Edytuj termin</a>
                        
                        <a href="{% url 'anuluj_wynajem' w.id %}" 
                           class="btn-cancel" 
                           onclick="return confirm('Czy na pewno chcesz anulować ten wynajem?')">
                           Anuluj rezerwację
                        </a>
                    {% else %}
                        <div class="status-alert">Wynajem w toku lub zakończony</div>
                    {% endif %}
                </div>
            </div>

            <div class="price-tag">
                <span class="label">Koszt całkowity</span>
                <span class="amount">{{ w.laczna_cena }} PLN</span>
            </div>
        </div>
    {% empty %}
        <p>Twoja lista wynajmów jest pusta.</p>
    {% endfor %}
</div>
</body>
</html>