{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Wypożyczalnia Aut | Premium</title>
    <style>
        /* Import nowoczesnej czcionki */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');

        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: #121212; 
            color: #e0e0e0; 
            line-height: 1.6; 
        }

        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        .hero-banner { 
            width: 100%; 
            height: 500px; 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(18,18,18,1)), 
                        url("{% static 'ymyuidmjjxce3sac52lb.webp' %}") no-repeat center center; 
            background-size: cover; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            text-align: center;
        }
        
        .hero-text h1 { margin: 0; font-size: 3.5rem; font-weight: 600; color: #ffffff; letter-spacing: -1px; }
        .hero-text p { font-weight: 300; color: #b0b0b0; font-size: 1.2rem; }

        nav { 
            background-color: rgba(18, 18, 18, 0.95); 
            padding: 20px 0; 
            border-bottom: 1px solid #2a2a2a;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        nav a { 
            color: #999; 
            text-decoration: none; 
            margin-right: 25px; 
            font-size: 0.9rem; 
            text-transform: uppercase; 
            letter-spacing: 1px;
            transition: 0.3s; 
        }
        nav a:hover { color: #5cb85c; }

        .car-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; margin-top: 40px; }
        
        .car-item { 
            background: #1e1e1e; 
            border-radius: 15px; 
            padding: 30px; 
            border: 1px solid #2a2a2a;
            transition: all 0.3s ease;
        }
        .car-item:hover { border-color: #4a4a4a; transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .car-item h3 { margin: 0 0 10px 0; font-size: 1.5rem; color: #ffffff; }
        .car-meta { color: #888; font-size: 0.85rem; margin-bottom: 20px; }
        .price { font-size: 1.8rem; color: #ffffff; font-weight: 600; margin-bottom: 20px; }
        .price span { font-size: 0.9rem; color: #666; font-weight: 400; }

        .btn-wynajmij { 
            display: block; 
            background: #448a44; 
            color: white; 
            padding: 12px; 
            text-decoration: none; 
            border-radius: 8px; 
            text-align: center;
            font-weight: 600;
            transition: 0.3s;
        }
        .btn-wynajmij:hover { background: #52a352; }

        .owner-tag { color: #555; font-size: 0.8rem; text-transform: uppercase; border: 1px solid #333; padding: 5px 10px; border-radius: 5px; }

        .message { padding: 15px; margin: 20px 0; border-radius: 8px; text-align: center; font-size: 0.9rem; }
        .success { background: #1b2e1b; color: #7cfc00; border: 1px solid #2d4d2d; }
        .error { background: #331a1a; color: #ff6b6b; border: 1px solid #5c2d2d; }
    </style>
</head>
<body>

<nav>
    <div class="container">
        <a href="{% url 'home' %}">Główna</a>
        {% if user.is_authenticated %}
            {% if user.is_superuser %}
                <a href="{% url 'moje_auta' %}">Zarządzanie</a>
            {% elif is_wlasciciel %}
                <a href="{% url 'moje_auta' %}">Panel Właściciela</a>
            {% else %}
                {# DODANE: Przycisk dla zwykłego usera, żeby mógł zostać właścicielem #}
                <a href="{% url 'wniosek_o_wlasciciela' %}">Zostań Właścicielem</a>
            {% endif %}
            
            <a href="{% url 'moje_wynajmy' %}">Moje Wynajmy</a>
            <a href="{% url 'wylogowanie' %}" style="float: right; color: #ff6b6b;">Wyloguj ({{ user.username }})</a>
        {% else %}
            <a href="{% url 'logowanie' %}">Logowanie</a>
            <a href="{% url 'rejestracja' %}">Rejestracja</a>
        {% endif %}
    </div>
</nav>

<div class="hero-banner">
    <div class="hero-text">
        <h1>Eksploruj nasze samochody</h1>
        <p>Auta na każdą okazję</p>
    </div>
</div>

<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="message {% if message.tags == 'error' %}error{% else %}success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="car-grid">
        {% for auto in samochody %}
        <div class="car-item">
            <h3>{{ auto.marka }} {{ auto.model }}</h3>
            <div class="car-meta">
                {{ auto.kategoria.nazwa }} &bull; {{ auto.kolor }}<br>
                Właściciel: {{ auto.wlasciciel.username }}
            </div>
            
            <div class="price">
                {{ auto.cena_za_dobe }} <span>PLN / doba</span>
            </div>

            {% if auto.id in zajete_auta_ids %}
                <p style="color: #666; font-size: 0.9rem; font-style: italic;">Aktualnie w trasie</p>
            {% else %}
                {% if user.is_authenticated %}
                    {% if auto.wlasciciel == user %}
                        <span class="owner-tag">Twoja własność</span>
                    {% else %}
                        <a href="{% url 'wynajem_szczegoly' auto.pk %}" class="btn-wynajmij">Rezerwuj pojazd</a>
                    {% endif %}
                {% else %}
                    <a href="{% url 'logowanie' %}" style="color: #448a44; font-size: 0.9rem;">Zaloguj się, by wynająć</a>
                {% endif %}
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

</body>
</html>